<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Tween.js / hello world!</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link href="css/style.css" media="screen" rel="stylesheet" type="text/css" />
		<style>
			.threedee {
				position: absolute;
				transform-style: preserve-3d;
				transform: translate3d(0, 0, 0.1px);
			}
			.box {
				width: 100px;
				height: 100px;
				padding: 1em;
				box-sizing: border-box;
			}
		</style>
	</head>
	<body style="transform-style: preserve-3d; perspective: 800px;">
		<div id="info">
			<h1><a href="http://github.com/tweenjs/tween.js">tween.js</a></h1>
			<h2>00 _ hello world</h2>
			<p>Simple example for illustrating the creation and chaining of tweens.</p>
		</div>

		<div class="threedee" style="transform: translate3d(0, 0, 0.1px);">
			<div id="target" class="box" style="background: #a0dde9;">hello world!</div>
		</div>

		<div class="threedee" style="transform: translate3d(0, 120px, 0.1px);">
			<div id="target2" class="box" style="background: #b0a0e9;">hello world again!</div>
		</div>

		<script src="../dist/tween.umd.js"></script>
		<script src="js/RequestAnimationFrame.js"></script>
		<script>
			init(document.getElementById('target'))
			init(document.getElementById('target2'))
			// init2()
			animate()

			function init(target) {
				const position = {x: 0, y: 0, rotation: 0}
				const tween = new TWEEN.Tween(position)
					.to({x: 700, y: 200, rotation: 360}, 2000)
					.easing(TWEEN.Easing.Exponential.InOut)
					.onUpdate(update)

				const tweenBack = new TWEEN.Tween(position)
					.to({x: 0, y: 0, rotation: 0}, 2000)
					.easing(TWEEN.Easing.Exponential.InOut)
					.onUpdate(update)

				tween.chain(tweenBack)
				tweenBack.chain(tween)

				tween.start()

				function update() {
					target.style.transform = `translate3d(${position.x}px, ${position.y}px, 0.01px) rotateY(${position.rotation}deg)`
				}
			}

			//If we register the callback animate, but the TWEEN.update(time) returns false,
			//cancel/unregister the handler
			function animate(time) {
				var id = requestAnimationFrame(animate)

				var keepGoing = TWEEN.update(time)

				if (!keepGoing) cancelAnimationFrame(id)
			}
		</script>
	</body>
</html>
