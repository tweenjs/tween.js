<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>bars / tween.js</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="../src/tween.js"></script>
	<script type="text/javascript" src="http://github.com/mrdoob/stats.js/raw/master/build/stats.js"></script>
  </head>
  <body>
	<div id="target"></div>
	<script type="text/javascript">
		var stats;
		var elems = [];

		init();
		setInterval(loop, 1000/60);

		function init() {
			stats = new Stats();
			document.body.appendChild(stats.domElement);

			elems = [];

			for(var i = 0; i < 1000; i++) {
				var elem = {};
				var domElement = document.createElement('div');
				var bg = (Math.random() * 0xffffff) >> 0;
				domElement.style.position = 'absolute';
				domElement.style.top = (Math.random() * window.innerHeight) + 'px';
				domElement.style.background = '#' + bg.toString(16);
				
				var start = 500 + (Math.random() - Math.random()) * 250;
				var end = 500 + (Math.random() - Math.random()) * 250;
				domElement.style.marginLeft = start + 'px';
				domElement.style.fontFamily = 'Helvetica, Arial, sans-serif';
				domElement.style.fontSize = '6px';
				domElement.style.lineHeight = 0.5;
				domElement.style.width = '100px';
				domElement.style.height = '2px';
				domElement.innerHTML = '' + i;

				elem.domElement = domElement;

				elem.margin = start;

				var tween = new TWEEN.Tween(elem).property('margin', start, end).duration(4).delay(Math.random()).start();
				var tweenBack = new TWEEN.Tween(elem).property('margin', end, start).duration(4).delay(Math.random());
				
				tween.chain(tweenBack);
				tweenBack.chain(tween);

				TWEEN_MANAGER.addTween(tween);
				TWEEN_MANAGER.addTween(tweenBack);

				document.body.appendChild(elem.domElement);

				elems.push(elem);
			}
			
		}

		function loop() {
			for(var i = 0; i < elems.length; i++) {
				var e = elems[i];
				e.domElement.style.marginLeft = e.margin + 'px';
			}
			stats.update();
			TWEEN_MANAGER.update();
		}
	</script>
  </body>
</html>
